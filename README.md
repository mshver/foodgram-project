# Foodgram

**Foodgram** — это веб-приложение, представляющее собой социальную платформу для обмена рецептами и планирования питания. Проект разделён на две основные части:

1. **Backend (Django + Django REST Framework)**  
2. **Frontend (React)**  

В этом `README.md` описано, как собрать и запустить обе части локально (с использованием виртуального окружения) или под Docker.

---

## Требования (Prerequisites)

Для локального запуска проекта потребуются:

1. **Python 3.8+** (3.8.5 и выше)  
2. **pip / pipenv / virtualenv** (модуль `venv` или альтернативные средства виртуальных окружений)  
3. **Node.js 14+** + **npm 6+** (или **Yarn**)  
4. **PostgreSQL 12+**  
5. **(Опционально) Docker & Docker Compose** (если вы хотите поднять всё через контейнеры)

### 1. Настройка виртуального окружения и зависимостей

1. Перейдите в каталог `backend/`:
   ```bash
   cd foodgram-st/backend
2. (Linux/macOS) Создайте виртуальное окружение Python:
   ```bash
   python3 -m venv venv
   source venv/bin/activate
3. Windows (PowerShell):
   ```bash
   python3 -m venv venv
   source venv/bin/activate
4. Обновите pip (рекомендуется):
   ```bash
   pip install --upgrade pip
5. Установите зависимости из requirements.txt:
   ```bash
   pip install --no-cache-dir -r requirements.txt
Если возникнут ошибки (например, при сборке psycopg2-binary), убедитесь, что у вас установлены все системные библиотеки для сборки PostgreSQL-клиента (например, на Ubuntu это пакет libpq-dev).

### 2. Переменные окружения
Backend ожидает, что некоторые настройки (секретный ключ, данные для подключения к БД) будут переданы через ENV. Обязательные переменные:
1. ENV 
   ```bash
   # PostgreSQL
POSTGRES_DB=foodgram
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# Django
DJ_SECRET_KEY="my_super_secret_key_123"
DB_ENGINE=django.db.backends.postgresql
DB_NAME=foodgram
DB_HOST=db
DB_PORT=5432
DEBUG=False

# Дополнительные настройки (если нужно)
ALLOWED_HOSTS=localhost,127.0.0.1

KIP_PREFLIGHT_CHECK=true

### 3. Миграции и запуск
1. Инициализируйте миграции:
   ```bash
   python manage.py makemigrations
   python manage.py migrate
2. (Опционально) Создайте суперпользователя:
    ```bash
    python manage.py createsuperuser
# Введите email, пароль и т. д.
3. Запустите Django-сервер:
   ```bash
   python manage.py runserver 0.0.0.0:8000

### 4. Запуск под Docker
1. Постройте Docker-образ:
   ```bash
   docker build -t foodgram-backend:latest .
2. Запустите контейнер, передав необходимые переменные окружения и пробросив порт:
   ```bash
   docker run -d \
   --name foodgram-back \
-e DJ_SECRET_KEY="your_secret_key_here" \
-e DB_ENGINE="django.db.backends.postgresql" \
-e DB_NAME="foodgram" \
-e POSTGRES_USER="postgres" \
-e POSTGRES_PASSWORD="postgres" \
-e DB_HOST="db_host_inside_docker" \
-e DB_PORT="5432" \
-p 8000:8000 \
foodgram-backend:latest
3. Поднятие БД
Если вы хотите запустить PostgreSQL в отдельном контейнере:
    ```bash
   docker run -d \
  --name foodgram-db \
  -e POSTGRES_DB="foodgram" \
  -e POSTGRES_USER="postgres" \
  -e POSTGRES_PASSWORD="postgres" \
  -p 5432:5432 \
  postgres:12
После этого в docker run для foodgram-backend подставьте -e DB_HOST="172.17.0.1" (или полученный адрес контейнера foodgram-db) и порт 5432.
### 5. Установка зависимостей
1. Перейдите в каталог фронтенда и установите все NPM-пакеты:
    ```bash
   cd foodgram-st/frontend
   npm install
# или, если у вас установлен Yarn:
# yarn install
В результате во втором уровне папки появится папка node_modules/.
2. Настройка переменной API_URL
    ```bash
    # Linux/macOS:
 export API_URL="http://localhost:8000"
    ```bash
# Windows (PowerShell):
 $env:API_URL = "http://localhost:8000"
3. Запуск разработки
После установки зависимостей и настройки API_URL запустите dev-сервер:
    ```bash
   npm start
# или
# yarn start
4. Production-сборка
   ```bash
   npm run build
# или
# yarn build

### Комментарий

Уважаемый ревьюер,
буду рада кратко озвучить ключевые возможности  проекта Foodgram:

1. Регистрация и профиль
Пользователь регистрируется по e-mail и паролю, получает JWT-токен для авторизации.
В своём профиле может изменить имя, пароль, аватар и посмотреть количество своих рецептов, подписок и избранных.

2. Рецепты
Авторизованный пользователь создаёт, редактирует и удаляет только свои рецепты: указывается название, изображение, ингредиенты (с количеством и единицами измерения), шаги приготовления, время и теги (например, «Завтрак», «Десерт»).
Все пользователи (включая гостей) могут просматривать список рецептов с пагинацией, фильтровать их по тегам и подпискам, а также открывать подробную страницу с ингредиентами, автором и описанием.

3. Избранное и корзина
Авторизованные пользователи могут добавлять понравившиеся рецепты в «Избранное» и просматривать их в одноимённом разделе.
При добавлении рецепта в «Корзину» формируется суммарный список ингредиентов из всех выбранных рецептов. В «Корзине» можно удалить рецепт и скачать итоговый список покупок в виде PDF/текста.

4. Подписки и комментарии
Есть функция «Подписаться/Отписаться» на автора: новые рецепты подписанных авторов попадают в раздел «Мои подписки».
Любой авторизованный пользователь может оставлять комментарии к рецепту, а также редактировать или удалять собственные комментарии.

5. Справочники: теги и ингредиенты
Теги (предопределённые категории для фильтрации) и ингредиенты (с названиями и единицами измерения) хранятся в справочниках. Можно получить их списки через API с поиском по названию.
Админ-панель и документация API
В Django Admin можно управлять пользователями, рецептами, тегами и ингредиентами, а также просматривать комментарии.
Полная документация (OpenAPI/Redoc) доступна по адресу /api/schema/ или /api/docs/, где указаны все эндпоинты, их методы и требуемые поля.
Очень надеюсь, что этот краткий обзор поможет Вам оценить функционал проекта. Если потребуются уточнения или дополнительные детали, с удовольствием отвечу на все вопросы. Спасибо за внимание и ваше время!